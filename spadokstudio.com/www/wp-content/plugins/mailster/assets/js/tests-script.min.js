mailster=function(a,s,t,e){"use strict";var n=s("#singletest").val()||null,i=s(".start-test"),r=s(".tests-output"),o=s(".tests-textoutput"),l=s(".tests-wrap"),c=s(".test-info"),u=s("#progress"),d=u.find(".bar"),f=s("#outputnav"),h=s(".subtab"),g,m;i.on("click",function(){i.hide();u.show();r.empty();o.val(o.data("pretext"));m=1;v(n);g={error:0,warning:0,notice:0,success:0};return false});r.on("click","a",function(){if(this.className.match(/retest/))return true;if(this.href)t.open(this.href);return false});l.on("change","input",function(){s(this).is(":checked")?l.removeClass("no-"+s(this).data("type")):l.addClass("no-"+s(this).data("type"))});f.on("click","a.nav-tab",function(){f.find("a").removeClass("nav-tab-active");h.hide();var t=s(this).addClass("nav-tab-active").attr("href");location.hash=t;s("#subtab-"+t.substr(1)).show();if(t=="#systeminfo"){var e=s("#system_info_content");if(a.util.trim(e.val()))return;e.val("...");a.util.ajax("get_system_info",function(t){if(t.data.log)a.log(t.data.log);e.val(t.data.msg)})}return false});if(/autostart/.test(location.search)){i.trigger("click")}else{location.hash&&f.find('a[href="'+location.hash+'"]').length?f.find('a[href="'+location.hash+'"]').trigger("click"):f.find("a").eq(0).trigger("click")}function v(t){a.util.ajax("test",{test_id:t},function(t){g["error"]+=t.data.errors.error;g["warning"]+=t.data.errors.warning;g["notice"]+=t.data.errors.notice;g["success"]+=t.data.errors.success;s(t.data.message.html).appendTo(r);o.val(o.val()+t.data.message.text);if(t.data.nexttest&&!n){d.width(++m/t.data.total*100+"%");c.html(a.util.sprintf(a.l10n.tests.running_test,m,t.data.total,t.data.next))}else{d.width("100%");setTimeout(function(){i.html(a.l10n.tests.restart_test).show();u.hide();d.width(0);c.html(a.util.sprintf(a.l10n.tests.tests_finished,g.error,g.warning,g.notice))},500)}if(t.data.nexttest&&!n){setTimeout(function(){v(t.data.nexttest)},100)}else{}},function(t,e,a){})}return a}(mailster||{},jQuery,window,document);