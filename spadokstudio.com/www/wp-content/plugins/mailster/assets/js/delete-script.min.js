mailster=function(e,t,s,a){"use strict";var n=t(".status");e.events.push("documentReady",r);e.$.document.on("change","#delete-subscribers input,#delete-subscribers select",r).on("submit","#delete-subscribers",function(){var s=prompt(e.l10n.manage.confirm_delete);if(!s)return false;if("delete"==s.toLowerCase()){var a=t("#delete-subscribers").serialize();n.addClass("progress spinner");e.util.ajax("delete_contacts",{data:a},function(e){if(e.success){n.html(e.data.msg)}else{n.html(e.data.msg)}n.removeClass("spinner");r()},function(e,t,s){n.html("["+e.status+"] "+s)})}return false}).on("click",".remove-job",function(){if(!confirm(e.l10n.manage.confirm_job_delete))return false;var s=t(this).closest(".manage-job");e.util.ajax("delete_delete_job",{id:s.data("id")},function(e){if(e.success){s.slideUp(function(){s.remove()})}},function(e,t,s){});return false}).on("click","#schedule-delete-subscriber-button",function(){var a=t("#delete-subscribers").serialize();if(!/&lists%5B%5D/.test(a)&&!/&nolists=1/.test(a)){alert(e.l10n.manage.list_required);return false}if(!/&status%5B%5D/.test(a)){alert(e.l10n.manage.status_required);return false}var r=prompt(e.l10n.manage.confirm_job,e.util.sprintf(e.l10n.manage.confirm_job_default,t(".manage-job").length+1));if(!r)return false;n.addClass("progress spinner");e.util.ajax("delete_contacts",{schedule:true,name:r,data:a},function(e){n.removeClass("spinner");if(e.success){n.html(e.data.msg);s.location.reload()}else{n.html(e.data.msg)}},function(e,t,s){n.html("["+e.status+"] "+s)});return false});function r(){setTimeout(function(){var s=t("#delete-subscribers").serialize();t("#delete-subscriber-button").prop("disabled",true);e.util.ajax("get_subscriber_count",{data:s},function(s){if(s.success){t("#delete-subscriber-button").val(e.util.sprintf(e.l10n.manage.delete_n_subscribers,s.data.count_formated)).prop("disabled",!s.data.count)}})},10)}return e}(mailster||{},jQuery,window,document);