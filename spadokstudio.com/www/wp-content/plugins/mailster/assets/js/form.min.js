jQuery(document).ready(function(e){"use strict";e("body").on("submit.mailster","form.mailster-ajax-form",function(s){s.preventDefault();var r=e(this),i=r.serialize(),a=e('<div class="mailster-form-info"></div>'),t;if("function"===typeof window.mailster_pre_submit){t=window.mailster_pre_submit.call(this,i);if(t===false)return false;if(typeof t!=="undefined")i=t}r.addClass("loading").find(".submit-button").prop("disabled",true);e.post(r.attr("action"),i,o,"JSON").fail(function(e,s,r){var i;try{i=JSON.parse(e.responseText);if(!i.data.html){i={html:"There was an error with the response:<br><code>["+i.data.code+"] "+i.data.message+"</code>",success:false}}}catch(s){i={html:"There was an error while parsing the response:<br><code>"+e.responseText+"</code>",success:false}}o(i);if(console)console.error(e.responseText)});function o(s){r.removeClass("loading has-errors").find("div.mailster-wrapper").removeClass("error");r.find(".mailster-form-info").remove();if("function"===typeof window.mailster_post_submit){t=window.mailster_post_submit.call(r[0],s);if(t===false)return false;if(typeof t!=="undefined")s=t}r.find(".submit-button").prop("disabled",false);if(s.data.html)a.html(s.data.html);if(e(document).scrollTop()<r.offset().top){a.prependTo(r)}else{a.appendTo(r)}if(s.success){if(!r.is(".is-profile"))r.find(".mailster-form-fields").slideUp(100).find(".mailster-wrapper").find(":input").prop("disabled",true).filter(".input").val("");s.data.redirect?location.href=s.data.redirect:a.show().addClass("success")}else{if(s.data.fields)e.each(s.data.fields,function(e){r.addClass("has-errors").find(".mailster-"+e+"-wrapper").addClass("error")});a.show().addClass("error")}}})});