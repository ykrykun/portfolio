mailster=function(n,i,u,f){"use strict";i(".register_form_wrap").on("focus","input",function(){i(this).attr("data-placeholder",i(this).attr("placeholder"));i(this).attr("placeholder","")}).on("blur","input",function(){i(this).attr("placeholder",i(this).attr("data-placeholder"))}).on("click",".envato-signup",function(){e(this.href,600,900,"mailster_envato_signup");return false}).on("click",".howto-purchasecode",function(){n.dialog.open("registration-dialog");return false}).on("change",".tos",function(){i(this).val(Math.round((new Date).getTime()/1e3))}).on("submit",".register_form",function(){var a=i(this),s=a.parent(),e=s.find("input.register-form-purchasecode").val(),r=s.find("input.register-form-slug").val(),t;a.removeClass("has-error").prop("disabled",true);s.addClass("loading");n.util.ajax("register",{purchasecode:e,slug:r},function(e){a.prop("disabled",false);s.removeClass("loading");if(e.success){s.addClass("step-2").removeClass("step-1")}else{t=e.data.error;t+=' <a href="https://evp.to/error-'+e.data.code+'" target="_blank" rel="noopener">'+n.l10n.register.help+"</a>";a.addClass("has-error").find(".error-msg").html(t)}},function(e,r,t){a.prop("disabled",false);s.removeClass("loading");alert(n.l10n.register.error+"\n\n"+t)});return false}).on("submit",".register_form_2",function(){var a=i(this),s=a.parent(),e=s.find("input.register-form-purchasecode").val(),r=s.find("input.register-form-slug").val(),t;a.removeClass("has-error").prop("disabled",true);s.addClass("loading");n.util.ajax("register",{purchasecode:e,slug:r,data:a.serialize()},function(e){a.prop("disabled",false);s.removeClass("loading");if(e.success){s.addClass("step-3").removeClass("step-2");n.$.document.trigger("verified."+r,[e.data.purchasecode,e.data.username,e.data.email])}else{if(e.data.code==406||e.data.code==679||e.data.code==680){a=s.find(".register_form");a.parent().removeClass("step-2").addClass("step-1")}t=e.data.error;t+=' (<a href="https://evp.to/error-'+e.data.code+'" target="_blank" rel="noopener">'+n.l10n.register.help+"</a>)";a.addClass("has-error").find(".error-msg").html(t)}},function(e,r,t){a.prop("disabled",false);s.removeClass("loading");alert(n.l10n.register.error+"\n\n"+t)});return false}).removeClass("loading");function e(e,r,t,a){var s=u.screenLeft!=undefined?u.screenLeft:screen.left,n=u.screenTop!=undefined?u.screenTop:screen.top,i=u.innerWidth?u.innerWidth:f.documentElement.clientWidth?f.documentElement.clientWidth:screen.width,o=u.innerHeight?u.innerHeight:f.documentElement.clientHeight?f.documentElement.clientHeight:screen.height,l=i/2-r/2+s,d=o/2-t/2+n,c=u.open(e,a,"scrollbars=auto,resizable=1,menubar=0,toolbar=0,location=0,directories=0,status=0, width="+r+", height="+t+", top="+d+", left="+l);if(u.focus)c.focus()}u.verifyMailster=function(e,r,t,a){var s=i(".register_form_wrap-"+e);s.find("input.register-form-purchasecode").val(r);s.find("input.username").val(t);s.find("input.email").val(a);if(r){s.find(".register_form").parent().removeClass("step-1").addClass("step-2")}else{s.find(".register_form").submit()}};return n}(mailster||{},jQuery,window,document);