jQuery(function(t){t(document).ready(function(){t(".dsm_masonry_gallery").each(function(e,n){var a=t(this);let i=a.find(".grid").data(),o=a.find(".grid").masonry({itemSelector:".grid-item",percentPosition:!0,columnWidth:".grid-sizer",gutter:".gutter-sizer",horizontalOrder:i.horizontalorder});if(a.parents(".dsm_content_toggle").length){var r=a.parents(".dsm_content_toggle").find(".dsm-toggle-btn .dsm-input");t(r).on("change",function(){o.imagesLoaded().done(function(){o.masonry("layout")})})}if(t(document).imagesLoaded().done(function(t){if("undefined"!=typeof Waypoint){o.masonry("layout");a.waypoint({handler:function(t){setTimeout(function(){o.masonry("layout")},200)},offset:-300})}else setTimeout(function(){o.masonry("layout")},200)}),!0===i.lightbox){a.find(".grid-item").children("a").magnificPopup({type:"image",gallery:{enabled:!0},removalDelay:300,mainClass:"mfp-fade",autoFocusLast:!1,image:{verticalFit:!0,titleSrc:function(t){let e="";return t.el.attr("data-title")&&(e+=t.el.attr("data-title")),t.el.attr("data-caption")&&(e+="<small class='dsm-image-caption'>"+t.el.attr("data-caption")+"</small>"),e}}})}})})});